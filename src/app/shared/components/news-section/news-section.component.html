<section class="news-container" data-aos="fade-up">
    <div class="section-header">
        <span class="pill">BLOG & NOTICIAS</span>
        <h2>Tendencias en Domótica</h2>
        <p>Mantente al día con lo último en tecnología para el hogar.</p>
    </div>

    <p-carousel [value]="news" [numVisible]="3" [numScroll]="1" [circular]="true" [autoplayInterval]="5000"
        [responsiveOptions]="[
        {breakpoint: '1024px', numVisible: 3, numScroll: 1},
        {breakpoint: '768px', numVisible: 2, numScroll: 1},
        {breakpoint: '560px', numVisible: 1, numScroll: 1}
    ]">
        <ng-template let-item pTemplate="item">
            <article class="news-card mx-2" style="margin: 0 10px;">
                <div class="card-image">
                    <img [src]="item.image" [alt]="item.title" loading="lazy">
                    <span class="tag">{{item.tag}}</span>
                </div>
                <div class="card-content">
                    <span class="date"><i class="far fa-calendar-alt"></i> {{item.date | date:'dd MMM yyyy'}}</span>
                    <h3>{{item.title}}</h3>
                    <p>{{item.summary}}</p>
                    <a href="#" (click)="openNews(item); $event.preventDefault()" class="read-more">Leer más <i
                            class="fas fa-arrow-right"></i></a>
                </div>
            </article>
        </ng-template>
    </p-carousel>

    <!-- Modal Detalle Noticia Estilo Blog -->
    <p-dialog [(visible)]="visible" [modal]="true" [style]="{width: '95vw', maxWidth: '800px'}" [draggable]="false"
        [resizable]="false" [dismissableMask]="true" styleClass="news-dialog" *ngIf="selectedNews">
        <ng-template pTemplate="header">
            <div class="dialog-header-content">
                <span class="category-badge">{{selectedNews.tag}}</span>
                <h2>{{selectedNews.title}}</h2>
                <span class="meta-date"><i class="far fa-calendar-alt"></i> {{selectedNews.date | date:'dd MMMM
                    yyyy'}}</span>
            </div>
        </ng-template>

        <div class="article-body">
            <div class="hero-image-container">
                <img [src]="selectedNews.image" [alt]="selectedNews.title">
            </div>

            <div class="text-content">
                <p class="lead">{{selectedNews.summary}}</p>
                <hr>

                <!-- Contenido Dinámico Real -->
                <div class="dynamic-content" [innerHTML]="selectedNews.fullContent" *ngIf="selectedNews.fullContent">
                </div>

                <!-- Fallback por seguridad -->
                <div class="dummy-text" *ngIf="!selectedNews.fullContent">
                    <p>Contenido detallado no disponible en este momento.</p>
                </div>

                <div class="cta-box">
                    <p>¿Te gustaría aplicar esto en tu casa?</p>
                    <a href="https://civitech.es/contactanos" class="btn-cta">Solicitar Auditoría Gratis</a>
                </div>
            </div>
        </div>
    </p-dialog>
</section>