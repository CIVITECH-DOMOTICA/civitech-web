<!-- HERO SECTION CON PARALLAX -->
<div class="proyecto-hero" *ngIf="proyecto" [style.background-image]="'url(' + proyecto.imagenPrincipal + ')'">
    <div class="hero-overlay"></div>
    <div class="hero-content" data-aos="fade-up">
        <button class="btn-back" (click)="volverAProyectos()" aria-label="Volver a proyectos">
            <i class="fas fa-arrow-left"></i> Volver
        </button>
        <span class="proyecto-tipo-badge">{{proyecto.tipo}}</span>
        <h1 class="proyecto-titulo">{{proyecto.nombre}}</h1>
        <div class="proyecto-meta">
            <span class="meta-item"><i class="fas fa-map-marker-alt"></i> {{proyecto.ubicacion}}</span>
            <span class="meta-item"><i class="fas fa-calendar"></i> {{proyecto.fecha}}</span>
            <span class="meta-item"><i class="fas fa-clock"></i> {{proyecto.duracion}}</span>
        </div>
    </div>
    <div class="scroll-indicator">
        <i class="fas fa-chevron-down"></i>
    </div>
</div>

<!-- RESUMEN DEL PROYECTO -->
<section class="proyecto-resumen" *ngIf="proyecto">
    <div class="container" data-aos="fade-up">
        <h2 class="section-title">Resumen del Proyecto</h2>
        <p class="proyecto-descripcion">{{proyecto.descripcionCompleta}}</p>
    </div>
</section>

<!-- ESTADÍSTICAS IMPACTANTES -->
<section class="proyecto-stats-section" *ngIf="proyecto">
    <div class="container">
        <div class="stats-grid" data-aos="fade-up">
            <div class="stat-card" *ngIf="proyecto.ahorroEnergetico">
                <div class="stat-icon">
                    <i class="fas fa-bolt"></i>
                </div>
                <div class="stat-number">{{ahorroNumerico}}%</div>
                <div class="stat-label">Ahorro Energético</div>
            </div>

            <div class="stat-card" *ngIf="proyecto.dispositivosInstalados">
                <div class="stat-icon">
                    <i class="fas fa-microchip"></i>
                </div>
                <div class="stat-number">{{totalDispositivos}}</div>
                <div class="stat-label">Dispositivos Instalados</div>
            </div>

            <div class="stat-card" *ngIf="proyecto.satisfaccionCliente">
                <div class="stat-icon">
                    <i class="fas fa-star"></i>
                </div>
                <div class="stat-number">{{satisfaccionNumerica}}%</div>
                <div class="stat-label">Satisfacción del Cliente</div>
            </div>
        </div>
    </div>
</section>

<!-- GALERÍA DE IMÁGENES -->
<section class="galeria-section" *ngIf="proyecto && proyecto.imagenes.length > 0">
    <div class="container">
        <h2 class="section-title" data-aos="fade-up">Galería del Proyecto</h2>

        <!-- Imagen principal grande -->
        <div class="galeria-main-image" data-aos="zoom-in">
            <img [src]="imagenActual" [alt]="proyecto.nombre" (click)="abrirLightbox(imagenActual)">
        </div>

        <!-- Thumbnails -->
        <div class="galeria-thumbnails" data-aos="fade-up">
            <div *ngFor="let imagen of proyecto.imagenes; let i = index" class="thumbnail-item"
                [class.active]="imagenActual === imagen" (click)="cambiarImagen(i)">
                <img [src]="imagen" [alt]="proyecto.nombre + ' - ' + (i + 1)">
            </div>
        </div>
    </div>
</section>

<!-- TIMELINE DEL PROYECTO -->
<section class="timeline-section" *ngIf="proyecto && proyecto.fases && proyecto.fases.length > 0">
    <div class="container">
        <h2 class="section-title" data-aos="fade-up">Proceso de Instalación</h2>

        <div class="timeline">
            <div *ngFor="let fase of proyecto.fases; let i = index" class="timeline-item"
                [attr.data-aos]="'fade-' + (i % 2 === 0 ? 'right' : 'left')">
                <div class="timeline-marker">
                    <span class="timeline-number">{{i + 1}}</span>
                </div>
                <div class="timeline-content">
                    <h3>{{fase.titulo}}</h3>
                    <p>{{fase.descripcion}}</p>
                    <span class="timeline-duration"><i class="fas fa-clock"></i> {{fase.duracion}}</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- TECNOLOGÍAS Y SISTEMAS -->
<section class="tecnologias-section" *ngIf="proyecto">
    <div class="container">
        <h2 class="section-title" data-aos="fade-up">Tecnologías Implementadas</h2>

        <div class="tecnologias-grid">
            <div *ngFor="let categoria of proyecto.categorias" class="tecnologia-card" data-aos="flip-left">
                <div class="tech-icon">
                    <i class="fas" [ngClass]="getIconoCategoria(categoria)"></i>
                </div>
                <h4>{{categoria | titlecase}}</h4>
            </div>
        </div>
    </div>
</section>

<!-- ESPECIFICACIONES TÉCNICAS -->
<section class="especificaciones-section"
    *ngIf="proyecto && proyecto.especificaciones && proyecto.especificaciones.length > 0">
    <div class="container">
        <h2 class="section-title" data-aos="fade-up">Especificaciones Técnicas</h2>

        <div class="especificaciones-list" data-aos="fade-up">
            <div *ngFor="let esp of proyecto.especificaciones" class="especificacion-item">
                <i class="fas fa-check-circle"></i>
                <span>{{esp}}</span>
            </div>
        </div>
    </div>
</section>

<!-- TESTIMONIOS -->
<section class="testimonio-section" *ngIf="proyecto && proyecto.testimonios && proyecto.testimonios.length > 0">
    <div class="container">
        <h2 class="section-title" data-aos="fade-up">Lo que dice nuestro cliente</h2>

        <div *ngFor="let testimonio of proyecto.testimonios" class="testimonio-card" data-aos="zoom-in">
            <div class="quote-icon">
                <i class="fas fa-quote-left"></i>
            </div>
            <p class="testimonio-texto">"{{testimonio.texto}}"</p>
            <div class="testimonio-autor">
                <p class="autor-nombre">{{testimonio.autor}}</p>
                <p class="autor-cargo">{{testimonio.cargo}}</p>
                <div class="estrellas">
                    <i *ngFor="let star of getEstrellas()" class="fas fa-star"></i>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA FINAL -->
<section class="cta-section" data-aos="fade-up">
    <div class="container">
        <div class="cta-content">
            <h2>¿Te gustaría un proyecto similar?</h2>
            <p>Contáctanos y te ayudaremos a hacer realidad tu hogar inteligente</p>
            <button class="btn-cta" (click)="irAContacto()">
                <span>Solicita tu Presupuesto</span>
                <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </div>
</section>

<!-- LIGHTBOX -->
<div class="lightbox" *ngIf="lightboxVisible" (click)="cerrarLightbox()">
    <button class="lightbox-close" (click)="cerrarLightbox()" aria-label="Cerrar">
        <i class="fas fa-times"></i>
    </button>
    <div class="lightbox-content" (click)="$event.stopPropagation()">
        <img [src]="imagenActual" [alt]="proyecto?.nombre">
    </div>
</div>